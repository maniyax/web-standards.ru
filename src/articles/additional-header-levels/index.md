---
title: 'Дополнительные уровни заголовков: удачное решение или must die'
date: 2021-08-15
author: artem-plaksin
editors:
    - vadim-makeev
tags:
    - html
    - a11y
preview: 'Монолог о доступности заголовков с дополнительными уровнями.'
---

Сегодня я хотел бы затронуть очень важную вещь в доступности веб-контента - заголовки и, о чем многие забывают, их уровни.

## Введение

О важности уровней заголовков как таковых неплохо рассказывается [в соответствующей статье](https://web-standards.ru/articles/heading-levels/), поэтому в своей публикации я дам небольшое введение о заголовках с точки зрения скринридера, и поговорю о дополнительных уровнях. Я постараюсь не дублировать информацию, а предоставить необходимый минимум для понимания важности поднимаемой темы и взглянуть на нее под другим углом.

Причиной, побудившей написать меня об этом, стали идеи различных новаторов - либо отказаться от уровней заголовков вовсе, либо, если не хватает шести уровней, начать добавлять седьмой, восьмой и так далее при помощи <code>aria-level="N"</code>.

Во многом сомнения у людей возникают из-за [ARIA 12](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA12.html), где в первом примере не указывается уровень вовсе, а во втором демонстрируется возможность создания заголовка седьмого уровня.

Здесь стоит напомнить, что WAI-ARIA является технической спецификацией, а примеры реализации являются всего лишь гротескными примерами, чтобы продемонстрировать функциональность спеки. Использование подавляющего большинства из ARIA-практик вам не пригодится, а в некоторых случаях даже навредит, как в случае с заголовками или меню.

### Заголовки для скринридера

Незрячий пользователь, изучая web-документ, может перемещаться практически к любому типу элементов на странице при помощи быстрой навигации. Вся qwerty-клавиатура является областью, содержащей горячие клавиши для навигации по заголовкам, регионам, ссылкам (посещенным и непосещенным в отдельности), элементам формы (флажкам, кнопкам, полям редактора) и так далее.

Например, вперед по заголовкам пользователь может перемещаться буквой "H", назад же - "Shift+H", но это лишь внешняя часть такой навигации. Теги <code>&lt;h1&gt; - &lt;h6&gt;</code> - это разные элементы, хотя они и объединены одной ролью заголовка.

Навигация между разными уровнями - это то, что делает заголовки доступными. В большом документе с серьезной иерархией частей, глав и подразделов просто-таки необходима возможность отличать названия разного уровня, а не пролистывать все при помощи одной горячей клавиши. Поэтому в скринридерах дополнительно реализован механизм быстрого перехода к заголовкам с первого до шестого уровня, при помощи цифр от одного до шести соответственно.

Таким образом, используя заголовок на странице, вы не просто даете возможность незрячему пользователю быстро переместиться к нему, но еще и понять важность того или иного заголовка в структуре документа.

Здесь также хочется дать небольшую ремарку. Любой слепой человек не равен опытному пользователю скринридера по умолчанию. Некоторые пользователи не используют навигацию по уровням заголовков, потому что не достаточно полно владеют программой экранного доступа. Какие-то, которых совсем меньшинство, предпочитают и вовсе перемещаться по сайту только стрелками и клавишей таб, просто не используя быструю навигацию. Пользователи бывают разные, но ваша задача сделать интерфейс доступным для всех. Грамотное использование уровней заголовков добавит доступности многим людям, но никак не ухудшит взаимодействие для менее опытных пользователей

### Пример важности уровней

Покажу ситуацию на примере видеохостинга Youtube. До недавнего времени имена пользователей, оставивших комментарии под видео, не являлись заголовками. Навигироваться по ним можно было при помощи буквы "G", перемещаясь к аватаркам, а первое нажатие клавиши "H" перемещало к первому ролику в группе рекомендованных, чье название было выведено в заголовок третьего уровня. После обновления все имена пользователей попали тоже в заголовки третьего уровня, из-за чего пропала возможность быстро попадать к рекомендациям.

Какие существовали бы способы решения проблемы:
* Добавление между группами элементов заголовка второго уровня с текстом "Рекомендации". 
* Выведение имен комментаторов через заголовки четвертого уровня.

К сожалению разработчики Google не использовали ни один из этих способов решения проблемы.

## Дополнительные уровни заголовков

Как вы поняли из введения, навигация по заголовкам в скринридере возможна поуровнево, благодаря цифрам от одного до шести. Такую быструю навигацию поддерживают все скринридеры, так как эти уровни соответствуют спецификации HTML.

Навигация же по дополнительным уровням, начиная с седьмого, теоретически возможна только до девятого, так как на этом цифры заканчиваются. Быстрый доступ к заголовкам начиная с десятого уровня и выше не возможен в принципе, поэтому создание таких принесет только недоступность.

Практически же навигация даже по заголовкам между шестым и десятым поддерживается только скринридером Narrator, имеющий крайне малую аудиторию незрячих пользователей, поэтому корректным является отказ от любого дополнительного уровня заголовка.

Здесь стоит отметить, что все скринридеры в разных браузерах отображают верстку по-разному. Не исключением являются и заголовки с дополнительными уровнями. Какие-то скринридеры отобразят хоть двадцать пятый уровень, какие-то сбросят его ко второму, чтобы к нему можно было переместиться при помощи клавиатуры. Так, например, происходит во всех случаях с заголовками, не имеющими уровня вовсе.

Предлагаю ознакомиться со сводной таблицей поведения в разных браузерах четырех основных скринридеров для десктопа при разных уровнях заголовков, чтобы оценить все многообразие, и окончательно отказаться от мысли использовать заголовки за пределами первого-шестого уровня.

### Сводная таблица

<table>
<tr>
<th>Уровни заголовков</th>
<th>Скринридер</th>
<th>Браузер</th>
<th>Поведение</th>
</tr>
<tr>
<td>7-9</td>
<td>Jaws</td>
<td>Все</td>
<td>Сбрасываются ко второму уровню</td>
</tr>
<tr>
<td>7-9</td>
<td>NVDA</td>
<td>Все</td>
<td>Читаются с заданным уровнем.</td>
</tr>
<tr>
<td>7-9</td>
<td>Voiceover</td>
<td>Все</td>
<td>Читаются с заданным уровнем.</td>
</tr>
<tr>
<td>7-9</td>
<td>Narrator</td>
<td>Все</td>
<td>Читаются с заданным уровнем.</td>
</tr>
<tr>
<td>>=10</td>
<td>Jaws</td>
<td>Все</td>
<td>Сбрасываются ко второму уровню</td>
</tr>
<tr>
<td>>=10</td>
<td>NVDA</td>
<td>Chromium</td>
<td>Сбрасываются ко второму уровню</td>
</tr>
<tr>
<td>>=10</td>
<td>NVDA</td>
<td>Firefox</td>
<td>Читаются с заданным уровнем.</td>
</tr>
<tr>
<td>>=10</td>
<td>Voiceover</td>
<td>Все</td>
<td>Читаются с заданным уровнем.</td>
</tr>
<tr>
<td>>=10</td>
<td>Narrator</td>
<td>Chromium</td>
<td>Сбрасываются ко второму уровню и объединяются в один, если идут последовательно.</td>
</tr>
<tr>
<td>>=10</td>
<td>Narrator</td>
<td>Firefox</td>
<td>Игнорирует как заголовки впринципе.</td>
</tr>
</table>

## Подводя итоги

Наиболее корректно поведение скринридера Jaws, который во всех случаях сбрасывает нестандартные заголовки ко второму уровню. На Github разработчика даже создавали [issue](https://github.com/FreedomScientific/VFO-standards-support/issues/301) с просьбой решить этот баг, но [соответствующий pull request](https://github.com/FreedomScientific/VFO-standards-support/pull/504) так и не был принят, так как фактически это фича.

Наименее корректно поведение VoiceOver, который передает все дополнительные уровни заголовков без возможности навигации по ним. О странном поведении Narrator говорить нет смысла, он имеет крайне малую аудиторию и приведен в таблице лишь для статистики. 

Таким образом, если вы хотите предоставить пользователю скринридера возможность навигации по вашему документу, вам следует использовать стандартные заголовки от первого до шестого уровня, даже применяя WAI-ARIA.

Положение 4.1 WCAG гласит следующее: 
> Обеспечьте максимальную совместимость контента с существующими и разрабатываемыми пользовательскими приложениями, включая ассистивные технологии. 

Таким образом не скринридеры должны подстраиваться под спецификацию ARIA и под ваш сайт, а ваши ресурсы должны быть совместимы со скринридерами, грамотно используя возможности WAI-ARIA. Именно поэтому важно вести разработку, консультируясь с опытными пользователями программ экранного доступа.

